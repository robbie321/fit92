var express         = require('express'); // create our app w/ express
var app             = express();  
// var http            = require('http').Server(app);
// var io              = require('socket.io')('http');          
var mongoose        = require('mongoose');                     // mongoose for mongodb
var logger          = require('morgan');

var bodyParser      = require('body-parser');    // pull information from HTML POST (express4)
var cors            = require('cors');
 
var databaseConfig  = require('./config/database');
var router          = require('./app/routes');



// Configuration
mongoose.connect(databaseConfig.url);
 
// listen (start app with node server.js) ======================================
var port = process.env.PORT || 8202;



app.use(bodyParser.urlencoded({ extended: false })); // Parses urlencoded bodies
app.use(bodyParser.json()); // Send JSON responses
app.use(logger('dev')); // Log requests to API using morgan
app.use(cors());
 
app.listen(port, function() {
    console.log("App listening on " + port);
}); 

router(app)